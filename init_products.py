import json
import sys
import os
from pathlib import Path

backend_dir = Path(__file__).parent / 'backend'
sys.path.append(str(backend_dir))
frontend_dir = Path(__file__).parent / 'frontend'
sys.path.append(str(frontend_dir))

# –¢–µ–ø–µ—Ä—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º
import backend
from backend import database, models
from database import SessionLocal, engine
from models import Base, Product
import frontend
from frontend import images
from images import *

# –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
products_data = [
    # –î–∏–≤–∞–Ω—ã (category: sofas)
    {
        "name": "–î–∏–≤–∞–Ω –ö–æ–º—Ñ–æ—Ä—Ç",
        "description": "–£–≥–ª–æ–≤–æ–π –¥–∏–≤–∞–Ω —Å –º–µ—Ö–∞–Ω–∏–∑–º–æ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ä–Ω—ã—Ö –≥–æ—Å—Ç–∏–Ω—ã—Ö. –û–±–∏–≤–∫–∞ - –≤–µ–ª—é—Ä, –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å - –ø–µ–Ω–æ–ø–æ–ª–∏—É—Ä–µ—Ç–∞–Ω –≤—ã—Å–æ–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏.",
        "price": 45990,
        "category": "–î–∏–≤–∞–Ω—ã",
        "image": "üõãÔ∏è",
        "specs": {
            "material": "–≤–µ–ª—é—Ä (100% –ø–æ–ª–∏—ç—Å—Ç–µ—Ä)",
            "frame": "–º–∞—Å—Å–∏–≤ —Å–æ—Å–Ω—ã + —Ñ–∞–Ω–µ—Ä–∞",
            "filler": "–ø–µ–Ω–æ–ø–æ–ª–∏—É—Ä–µ—Ç–∞–Ω HR 35 –∫–≥/–º¬≥",
            "size": "250 x 160 x 90 —Å–º",
            "bed_size": "200 x 140 —Å–º",
            "mechanism": "–µ–≤—Ä–æ–∫–Ω–∏–∂–∫–∞",
            "color": "–±–µ–∂–µ–≤—ã–π",
            "load": "–¥–æ 300 –∫–≥",
            "warranty": "5 –ª–µ—Ç"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–î–∏–≤–∞–Ω –£—é—Ç",
        "description": "–ü—Ä—è–º–æ–π –¥–∏–≤–∞–Ω —Å –ø–æ–¥–ª–æ–∫–æ—Ç–Ω–∏–∫–∞–º–∏. –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–æ–º–Ω–∞—Ç. –û–±–∏–≤–∫–∞ - –º–∏–∫—Ä–æ—Ñ–∏–±—Ä–∞, –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å - —Ö–æ–ª–ª–æ—Ñ–∞–π–±–µ—Ä.",
        "price": 38990,
        "category": "–î–∏–≤–∞–Ω—ã",
        "image": "üõãÔ∏è",
        "specs": {
            "material": "–º–∏–∫—Ä–æ—Ñ–∏–±—Ä–∞",
            "frame": "–õ–î–°–ü + —Ñ–∞–Ω–µ—Ä–∞",
            "filler": "—Ö–æ–ª–ª–æ—Ñ–∞–π–±–µ—Ä",
            "size": "200 x 90 x 85 —Å–º",
            "bed_size": "190 x 140 —Å–º",
            "mechanism": "–∫–ª–∏–∫-–∫–ª—è–∫",
            "color": "—Å–µ—Ä—ã–π",
            "load": "–¥–æ 250 –∫–≥",
            "warranty": "3 –≥–æ–¥–∞"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–î–∏–≤–∞–Ω –ü—Ä–µ—Å—Ç–∏–∂",
        "description": "–ö–æ–∂–∞–Ω—ã–π –¥–∏–≤–∞–Ω —Å —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–≤–æ–¥–æ–º. –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–ø–∏–Ω–∫–∏ –∏ –ø–æ–¥—Å—Ç–∞–≤–∫–∏ –¥–ª—è –Ω–æ–≥. –ü—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å –¥–ª—è —Ü–µ–Ω–∏—Ç–µ–ª–µ–π –∫–æ–º—Ñ–æ—Ä—Ç–∞.",
        "price": 52990,
        "category": "–î–∏–≤–∞–Ω—ã",
        "image": "üõãÔ∏è",
        "specs": {
            "material": "–Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫–æ–∂–∞",
            "frame": "–º–µ—Ç–∞–ª–ª + –º–∞—Å—Å–∏–≤ –¥–µ—Ä–µ–≤–∞",
            "filler": "–ª–∞—Ç–µ–∫—Å + –ø–µ–Ω–æ–ø–æ–ª–∏—É—Ä–µ—Ç–∞–Ω",
            "size": "230 x 100 x 85 —Å–º",
            "electric": "2 –º–æ—Ç–æ—Ä–∞, 5 —Ä–µ–∂–∏–º–æ–≤",
            "color": "–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π",
            "load": "–¥–æ 350 –∫–≥",
            "warranty": "7 –ª–µ—Ç"
        },
        "stock": "–ü–æ–¥ –∑–∞–∫–∞–∑"
    },
    {
        "name": "–î–∏–≤–∞–Ω –ö–æ–º–ø–∞–∫—Ç",
        "description": "–ú–∞–ª–µ–Ω—å–∫–∏–π –¥–∏–≤–∞–Ω –¥–ª—è –∫—É—Ö–Ω–∏ –∏–ª–∏ –ø—Ä–∏—Ö–æ–∂–µ–π. –õ–µ–≥–∫–∏–π, —É–¥–æ–±–Ω—ã–π, –ª–µ–≥–∫–æ –º–æ–µ—Ç—Å—è. –ò–¥–µ–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø–æ–º–µ—â–µ–Ω–∏–π.",
        "price": 32990,
        "category": "–î–∏–≤–∞–Ω—ã",
        "image": "üõãÔ∏è",
        "specs": {
            "material": "—ç–∫–æ–∫–æ–∂–∞",
            "frame": "–º–µ—Ç–∞–ª–ª",
            "filler": "–ø–µ–Ω–æ–ø–æ–ª–∏—É—Ä–µ—Ç–∞–Ω",
            "size": "140 x 80 x 85 —Å–º",
            "color": "–±–µ–ª—ã–π",
            "load": "–¥–æ 200 –∫–≥",
            "warranty": "2 –≥–æ–¥–∞"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    
    # –ö—Ä–æ–≤–∞—Ç–∏ (category: beds)
    {
        "name": "–ö—Ä–æ–≤–∞—Ç—å –°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ",
        "description": "–î–≤—É—Å–ø–∞–ª—å–Ω–∞—è –∫—Ä–æ–≤–∞—Ç—å —Å –æ—Ä—Ç–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–º –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º. –ú–∞—Ç–µ—Ä–∏–∞–ª - –º–∞—Å—Å–∏–≤ —Å–æ—Å–Ω—ã. –≠–∫–æ–ª–æ–≥–∏—á–Ω–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è –∫—Ä–æ–≤–∞—Ç—å –¥–ª—è –∑–¥–æ—Ä–æ–≤–æ–≥–æ —Å–Ω–∞.",
        "price": 32990,
        "category": "–ö—Ä–æ–≤–∞—Ç–∏",
        "image": "üõèÔ∏è",
        "specs": {
            "material": "–º–∞—Å—Å–∏–≤ —Å–æ—Å–Ω—ã",
            "base": "–æ—Ä—Ç–æ–ø–µ–¥–∏—á–µ—Å–∫–æ–µ —Å –ª–∞–º–µ–ª—è–º–∏",
            "size": "160 x 200 —Å–º",
            "height": "45 —Å–º",
            "color": "–Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π",
            "load": "–¥–æ 300 –∫–≥",
            "warranty": "5 –ª–µ—Ç"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–ö—Ä–æ–≤–∞—Ç—å –ü—Ä–µ—Å—Ç–∏–∂",
        "description": "–ö—Ä–æ–≤–∞—Ç—å —Å –º—è–≥–∫–∏–º –∏–∑–≥–æ–ª–æ–≤—å–µ–º –∏–∑ –≤–µ–ª—é—Ä–∞. –û—á–µ–Ω—å —É—é—Ç–Ω–∞—è –∏ —Å—Ç–∏–ª—å–Ω–∞—è. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è —Å–ø–∞–ª—å–Ω–∏ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ.",
        "price": 45990,
        "category": "–ö—Ä–æ–≤–∞—Ç–∏",
        "image": "üõèÔ∏è",
        "specs": {
            "material": "–≤–µ–ª—é—Ä + –õ–î–°–ü",
            "headboard": "–º—è–≥–∫–æ–µ",
            "base": "–æ—Ä—Ç–æ–ø–µ–¥–∏—á–µ—Å–∫–æ–µ",
            "size": "180 x 200 —Å–º",
            "color": "—Å–∏–Ω–∏–π",
            "load": "–¥–æ 350 –∫–≥",
            "warranty": "5 –ª–µ—Ç"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–ö—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–æ—Å–ø–∞–ª—å–Ω–∞—è",
        "description": "–î–ª—è –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–π –∏–ª–∏ –≥–æ—Å—Ç–µ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã. –ü—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è –∫—Ä–æ–≤–∞—Ç—å –∏–∑ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è.",
        "price": 24990,
        "category": "–ö—Ä–æ–≤–∞—Ç–∏",
        "image": "üõèÔ∏è",
        "specs": {
            "material": "–õ–î–°–ü",
            "base": "—Ä–µ–µ—á–Ω–æ–µ",
            "size": "90 x 200 —Å–º",
            "height": "40 —Å–º",
            "color": "–±–µ–ª—ã–π",
            "load": "–¥–æ 150 –∫–≥",
            "warranty": "3 –≥–æ–¥–∞"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–ö—Ä–æ–≤–∞—Ç—å –¥–µ—Ç—Å–∫–∞—è",
        "description": "–° –±–æ—Ä—Ç–∏–∫–∞–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º. –î–ª—è –¥–µ—Ç–µ–π –æ—Ç 3 –¥–æ 10 –ª–µ—Ç. –ö—Ä–æ–≤–∞—Ç—å –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏–∑ —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∏–º–µ–µ—Ç –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã –∏ –∑–∞—â–∏—Ç–Ω—ã–µ –±–æ—Ä—Ç–∏–∫–∏.",
        "price": 39990,
        "category": "–ö—Ä–æ–≤–∞—Ç–∏",
        "image": "üõèÔ∏è",
        "specs": {
            "material": "–º–∞—Å—Å–∏–≤ –±–µ—Ä–µ–∑—ã",
            "size": "80 x 160 —Å–º",
            "sides": "—Å—ä–µ–º–Ω—ã–µ, –≤—ã—Å–æ—Ç–∞ 30 —Å–º",
            "color": "–Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π",
            "load": "–¥–æ 100 –∫–≥",
            "warranty": "5 –ª–µ—Ç"
        },
        "stock": "–ü–æ–¥ –∑–∞–∫–∞–∑"
    },
    
    # –°—Ç–æ–ª—ã (category: tables)
    {
        "name": "–°—Ç–æ–ª –æ–±–µ–¥–µ–Ω–Ω—ã–π",
        "description": "–†–∞—Å–∫–ª–∞–¥–Ω–æ–π —Å—Ç–æ–ª –∏–∑ –º–∞—Å—Å–∏–≤–∞ –¥—É–±–∞. –ü–æ–∫—Ä—ã—Ç–∏–µ - –º–∞—Ç–æ–≤—ã–π –ª–∞–∫. –ò–¥–µ–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–µ–º–µ–π–Ω—ã—Ö –æ–±–µ–¥–æ–≤ –∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö —É–∂–∏–Ω–æ–≤.",
        "price": 18990,
        "category": "–°—Ç–æ–ª—ã",
        "image": "ü™ë",
        "specs": {
            "material": "–¥—É–±",
            "size_folded": "120 x 80 —Å–º",
            "size_unfolded": "180 x 80 —Å–º",
            "height": "75 —Å–º",
            "mechanism": "–∫–Ω–∏–∂–∫–∞",
            "color": "–Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π",
            "load": "–¥–æ 150 –∫–≥",
            "warranty": "5 –ª–µ—Ç"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–°—Ç–æ–ª –ø–∏—Å—å–º–µ–Ω–Ω—ã–π",
        "description": "–£–¥–æ–±–Ω—ã–π –ø–∏—Å—å–º–µ–Ω–Ω—ã–π —Å—Ç–æ–ª —Å —è—â–∏–∫–∞–º–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è. –û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Å–≤–æ–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å –∫–æ–º—Ñ–æ—Ä—Ç–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –¥–æ–º–∞ –∏–ª–∏ –æ—Ñ–∏—Å–∞.",
        "price": 24990,
        "category": "–°—Ç–æ–ª—ã",
        "image": "ü™ë",
        "specs": {
            "material": "–õ–î–°–ü",
            "size": "140 x 70 —Å–º",
            "height": "75 —Å–º",
            "drawers": "3 —à—Ç (–≥–ª—É–±–æ–∫–∏–µ)",
            "color": "–≤–µ–Ω–≥–µ",
            "load": "–¥–æ 100 –∫–≥",
            "warranty": "3 –≥–æ–¥–∞"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–°—Ç–æ–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–π",
        "description": "–≠—Ä–≥–æ–Ω–æ–º–∏—á–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–π —Å—Ç–æ–ª —Å –ø–æ–ª–∫–æ–π –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –±–ª–æ–∫–∞ –∏ –≤—ã–¥–≤–∏–∂–Ω–æ–π –ø–∞–Ω–µ–ª—å—é –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º.",
        "price": 32990,
        "category": "–°—Ç–æ–ª—ã",
        "image": "ü™ë",
        "specs": {
            "material": "–õ–î–°–ü",
            "size": "160 x 80 —Å–º",
            "height": "75 —Å–º",
            "pc_holder": "–µ—Å—Ç—å",
            "keyboard_tray": "–≤—ã–¥–≤–∏–∂–Ω–∞—è",
            "drawers": "2 —à—Ç",
            "color": "—á–µ—Ä–Ω—ã–π",
            "load": "–¥–æ 120 –∫–≥",
            "warranty": "3 –≥–æ–¥–∞"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    },
    {
        "name": "–°—Ç–æ–ª –∂—É—Ä–Ω–∞–ª—å–Ω—ã–π",
        "description": "–°—Ç–∏–ª—å–Ω—ã–π –∂—É—Ä–Ω–∞–ª—å–Ω—ã–π —Å—Ç–æ–ª–∏–∫ –¥–ª—è –≥–æ—Å—Ç–∏–Ω–æ–π. –õ–µ–≥–∫–∏–π, –∏–∑—è—â–Ω—ã–π, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ—á–Ω—ã–π. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–Ω–∏–≥, –∂—É—Ä–Ω–∞–ª–æ–≤ –∏ —á–∞—à–µ—á–∫–∏ –∫–æ—Ñ–µ.",
        "price": 15990,
        "category": "–°—Ç–æ–ª—ã",
        "image": "ü™ë",
        "specs": {
            "material": "—Å—Ç–µ–∫–ª–æ + –º–µ—Ç–∞–ª–ª",
            "size": "80 x 50 —Å–º",
            "height": "45 —Å–º",
            "glass": "–∑–∞–∫–∞–ª–µ–Ω–Ω–æ–µ, 8 –º–º",
            "shelf": "–Ω–∏–∂–Ω—è—è –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è",
            "color": "–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ —Å—Ç–µ–∫–ª–æ, —Ö—Ä–æ–º",
            "load": "–¥–æ 30 –∫–≥",
            "warranty": "2 –≥–æ–¥–∞"
        },
        "stock": "–í –Ω–∞–ª–∏—á–∏–∏"
    }
]

def init_products():
    print("üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —Ç–æ–≤–∞—Ä–æ–≤...")
    
    # –°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—ã (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç)
    Base.metadata.create_all(bind=engine)
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–µ—Å—Å–∏—é
    db = SessionLocal()
    
    try:
        # –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —Ç–æ–≤–∞—Ä–æ–≤ (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ)
        db.query(Product).delete()
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–≤–∞—Ä—ã
        for product_data in products_data:
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º specs –≤ JSON —Å—Ç—Ä–æ–∫—É
            specs_json = json.dumps(product_data["specs"], ensure_ascii=False)
            
            product = Product(
                name=product_data["name"],
                description=product_data["description"],
                price=product_data["price"],
                category=product_data["category"],
                image=product_data["image"],
                specs=specs_json,
                stock=product_data["stock"]
            )
            db.add(product)
        
        db.commit()
        print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ {len(products_data)} —Ç–æ–≤–∞—Ä–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        db.rollback()
    finally:
        db.close()

if __name__ == "__main__":
    init_products()